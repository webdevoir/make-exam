<%= link_to "Back to exam",examination_path(@exam) %><br/>

<div class="col-md-8 col-sm-12">

<h2>Write a question for <em><%= @exam.name %></em>.</h2>

<%= form_for([@exam, @question]) do |f| %>
  <% if @question.errors.any? %>
    <div>
     <!--  <%= pluralize(@question.errors.count, "error") %> prevented the question from being saved: -->
      <ul>
        <% @question.errors.messages.each do |attr, msg| %>
          <% msg.each do |val| %>
        <li><%= val %></li>
        <% end %>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= f.label :body, "Question Body" %><br>
    <%= f.text_area :body, class: "question_new_body"%>
  </div>
  <div class="question_type_points">
    <div style="float: left;">
      <%= f.label :question_type %><br>
      <%= f.select :question_type, ["Multiple Choice", "True/False", "Multiple Response", "Fill in the blank"], {}, { class: "form-control" } %>
    </div>
    <div style="float: right;">
      <%= f.label :points %><br>
      <%= f.select :points, [1 ,2, 3, 4, 5, 6, 7, 8, 9 , 10], {},{ class: "form-control" }%>
    </div>
  </div>
  <p>Enter the answer choices, and mark which answer is correct</p>
  <div style="clear: both;">
    
    <%= f.fields_for :answers do |ans_f| %>
       <%= render 'answer_fields', f: ans_f %>
    
  <% end %>
  <%= link_to_add_association 'add answer', f, :answers %>
</div>
    <div><%= f.submit "Submit", class: 'form-control' %></div>
  <% end %>
</div>

<script>
  $( function() {
      var q_type = $('#question_question_type');

      q_type.click(function () {
        var val = $(this).val();
        console.log(val);
        if (val == "True/False") {
          $('#question_answers_attributes_0_body').val("True")
          $('#question_answers_attributes_1_body').val("False")
          $('#question_answers_attributes_2_body').parent().parent().hide()
          $('#question_answers_attributes_3_body').parent().parent().hide()
        } else if(val == "Multiple Choice") {
          $('#question_answers_attributes_0_body').val("")
          $('#question_answers_attributes_1_body').val("")
          $('#question_answers_attributes_2_body').parent().parent().show()
          $('#question_answers_attributes_3_body').parent().parent().show()
        }

      });
    });
 </script>